import{aw as o}from"./vue-vendor-BT5MiFnI.js";const h=o("cupping",{state:()=>({sessions:[],currentSession:null,loading:!1,error:null,pagination:{page:1,limit:10,total:0}}),getters:{getSessionById:t=>s=>t.sessions.find(i=>i.id===s)},actions:{async fetchSessions(t={}){this.loading=!0,this.error=null;try{const s={data:[],pagination:{page:t.page||1,limit:t.limit||10,total:0}};return this.sessions=s.data,this.pagination=s.pagination,s}catch(s){throw this.error=s.message||"Failed to fetch cupping sessions",s}finally{this.loading=!1}},async fetchSessionById(t){this.loading=!0,this.error=null;try{const s=this.sessions.find(i=>i.id===t)||null;return this.currentSession=s,s}catch(s){throw this.error=s.message||"Failed to fetch cupping session",s}finally{this.loading=!1}},async createSession(t){this.loading=!0,this.error=null;try{const s={id:Date.now(),...t,createdAt:new Date().toISOString(),status:"pending"};return this.sessions.unshift(s),this.pagination.total++,s}catch(s){throw this.error=s.message||"Failed to create cupping session",s}finally{this.loading=!1}},async updateSession(t,s){this.loading=!0,this.error=null;try{const i=this.sessions.findIndex(e=>e.id===t);if(i!==-1){const e={...this.sessions[i],...s,updatedAt:new Date().toISOString()};return this.sessions[i]=e,this.currentSession&&this.currentSession.id===t&&(this.currentSession=e),e}throw new Error("Cupping session not found")}catch(i){throw this.error=i.message||"Failed to update cupping session",i}finally{this.loading=!1}},async deleteSession(t){this.loading=!0,this.error=null;try{const s=this.sessions.findIndex(i=>i.id===t);if(s!==-1)return this.sessions.splice(s,1),this.pagination.total--,this.currentSession&&this.currentSession.id===t&&(this.currentSession=null),!0;throw new Error("Cupping session not found")}catch(s){throw this.error=s.message||"Failed to delete cupping session",s}finally{this.loading=!1}},async inviteCuppers(t,s){this.loading=!0,this.error=null;try{const i=this.sessions.find(n=>n.id===t);if(!i)throw new Error("Cupping session not found");const e={...i,cuppers:[...i.cuppers||[],...s],updatedAt:new Date().toISOString()},r=this.sessions.findIndex(n=>n.id===t);return this.sessions[r]=e,this.currentSession&&this.currentSession.id===t&&(this.currentSession=e),e}catch(i){throw this.error=i.message||"Failed to invite cuppers",i}finally{this.loading=!1}}}});export{h as u};
