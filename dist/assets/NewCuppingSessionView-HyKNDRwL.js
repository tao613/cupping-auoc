import{r as V,c as X,X as j,y as f,A as o,P as l,H as n,ag as i,V as q,ax as J,z as v,L as a,M as x,O as K,a6 as Q}from"./vue-vendor-BT5MiFnI.js";import{u as W}from"./cupping.store-3IcC1xyy.js";import{_ as Y,a as Z}from"./index-BrO_L7mm.js";const h={class:"new-cupping-session-view"},ee={class:"page-header"},te={class:"form-container"},oe={class:"form-header"},le={class:"session-title"},se={class:"start-now-toggle"},ne={class:"form-section"},ie={class:"form-row"},ae={class:"form-row"},ue={class:"form-section"},de={class:"invite-options"},re={class:"invite-form"},pe={class:"guest-input"},me={key:0,class:"guest-list"},ce={key:1,class:"no-guests"},_e={class:"form-section"},fe={class:"id-structure-options"},ve={class:"form-section"},ge={class:"form-section"},Ve={class:"samples-input"},be={class:"form-section"},Ce={class:"form-section"},Se={class:"form-actions"},we={__name:"NewCuppingSessionView",setup(ye){const k=J(),B=W(),b=Z(),C=V(!1),m=V(!0),_=V(""),c=V([]),r=new Date,D=X(()=>r.toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"})),t=j({title:`Cupping Session ${D.value}`,startDate:r,startTime:r,endDate:new Date(r.getTime()+7*24*60*60*1e3),endTime:r,location:"",description:"",idStructure:"numbers",protocol:"arabica",sampleCount:1,isBlind:!1,comboCupping:!1,customCupCount:!1}),A=()=>{const u=prompt("Enter session title",t.title);u&&(t.title=u)},E=()=>{b.addNotification({type:"info",message:"All cuppers selected"})},L=()=>{c.value=[]},F=()=>{_.value.trim()&&(c.value.push(_.value.trim()),_.value="")},G=u=>{c.value.splice(u,1)},I=async()=>{C.value=!0;try{const u={title:t.title,startDate:m.value?r:t.startDate,startTime:m.value?r:t.startTime,endDate:t.endDate,endTime:t.endTime,location:t.location,description:t.description,idStructure:t.idStructure,protocol:t.protocol,sampleCount:t.sampleCount,isBlind:t.isBlind,comboCupping:t.comboCupping,customCupCount:t.customCupCount,guests:c.value},e=await B.createSession(u);b.addNotification({type:"success",message:"Cupping session created successfully"}),k.push("/cupping-sessions")}catch(u){b.addNotification({type:"error",message:u.message||"Failed to create cupping session"})}finally{C.value=!1}},M=()=>{k.push("/cupping-sessions")};return(u,e)=>{const R=i("router-link"),p=i("el-button"),$=i("el-switch"),U=i("el-date-picker"),d=i("el-form-item"),T=i("el-time-picker"),S=i("el-input"),w=i("el-radio"),z=i("el-radio-group"),g=i("el-option"),H=i("el-select"),O=i("el-input-number"),y=i("el-checkbox"),P=i("el-form");return v(),f("div",h,[o("div",ee,[e[15]||(e[15]=o("h1",null,"Start your cupping session",-1)),l(R,{to:"/cupping-sessions",class:"back-link"},{default:n(()=>e[14]||(e[14]=[o("i",{class:"el-icon-arrow-left"},null,-1),a(" Back to Cupping sessions ")])),_:1,__:[14]})]),o("div",te,[l(P,{onSubmit:q(I,["prevent"]),"label-position":"top"},{default:n(()=>[o("div",oe,[o("div",le,[o("h2",null,"Cupping Session "+x(D.value),1),l(p,{type:"text",onClick:A},{default:n(()=>e[16]||(e[16]=[o("i",{class:"el-icon-edit"},null,-1)])),_:1,__:[16]})]),o("div",se,[e[17]||(e[17]=o("span",null,"Start cupping now",-1)),l($,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s)},null,8,["modelValue"])])]),o("div",ne,[o("div",ie,[l(d,{label:"Start date"},{default:n(()=>[l(U,{modelValue:t.startDate,"onUpdate:modelValue":e[1]||(e[1]=s=>t.startDate=s),type:"date",placeholder:"Select date",disabled:m.value},null,8,["modelValue","disabled"])]),_:1}),l(d,{label:"Start time"},{default:n(()=>[l(T,{modelValue:t.startTime,"onUpdate:modelValue":e[2]||(e[2]=s=>t.startTime=s),placeholder:"Select time",disabled:m.value},null,8,["modelValue","disabled"])]),_:1})]),o("div",ae,[l(d,{label:"End date"},{default:n(()=>[l(U,{modelValue:t.endDate,"onUpdate:modelValue":e[3]||(e[3]=s=>t.endDate=s),type:"date",placeholder:"Select date"},null,8,["modelValue"])]),_:1}),l(d,{label:"End time"},{default:n(()=>[l(T,{modelValue:t.endTime,"onUpdate:modelValue":e[4]||(e[4]=s=>t.endTime=s),placeholder:"Select time"},null,8,["modelValue"])]),_:1})]),l(d,{label:"Location"},{default:n(()=>[l(S,{modelValue:t.location,"onUpdate:modelValue":e[5]||(e[5]=s=>t.location=s),placeholder:"Enter location"},{prefix:n(()=>e[18]||(e[18]=[o("i",{class:"el-icon-location"},null,-1)])),_:1},8,["modelValue"])]),_:1}),l(d,{label:"Description"},{default:n(()=>[l(S,{modelValue:t.description,"onUpdate:modelValue":e[6]||(e[6]=s=>t.description=s),type:"textarea",rows:"3",placeholder:"Enter session description"},null,8,["modelValue"])]),_:1})]),o("div",ue,[e[24]||(e[24]=o("h3",null,"Invite cuppers",-1)),o("div",de,[l(p,{onClick:E},{default:n(()=>e[19]||(e[19]=[a("Select all")])),_:1,__:[19]}),l(p,{onClick:L},{default:n(()=>e[20]||(e[20]=[a("Clear all")])),_:1,__:[20]})]),o("div",re,[l(d,{label:"Invite guest to cupping session"},{default:n(()=>[o("div",pe,[l(S,{modelValue:_.value,"onUpdate:modelValue":e[7]||(e[7]=s=>_.value=s),placeholder:"Name or E-Mail"},null,8,["modelValue"]),l(p,{onClick:F},{default:n(()=>e[21]||(e[21]=[a("Add guest")])),_:1,__:[21]})])]),_:1}),c.value.length>0?(v(),f("div",me,[(v(!0),f(K,null,Q(c.value,(s,N)=>(v(),f("div",{key:N,class:"guest-item"},[o("span",null,x(s),1),l(p,{type:"text",onClick:ke=>G(N)},{default:n(()=>e[22]||(e[22]=[o("i",{class:"el-icon-close"},null,-1)])),_:2,__:[22]},1032,["onClick"])]))),128))])):(v(),f("div",ce,e[23]||(e[23]=[o("p",null,"No guest cuppers invited",-1),o("p",{class:"note"},"These users will be notified when the session is saved",-1)])))])]),o("div",_e,[e[28]||(e[28]=o("h3",null,"Sample id structure",-1)),o("div",fe,[l(z,{modelValue:t.idStructure,"onUpdate:modelValue":e[8]||(e[8]=s=>t.idStructure=s)},{default:n(()=>[l(w,{label:"numbers"},{default:n(()=>e[25]||(e[25]=[a("Numbers (1,2,3...)")])),_:1,__:[25]}),l(w,{label:"digits"},{default:n(()=>e[26]||(e[26]=[a("3 Digit (e.g. 257)")])),_:1,__:[26]}),l(w,{label:"letters"},{default:n(()=>e[27]||(e[27]=[a("Letter (i.e. A, B...)")])),_:1,__:[27]})]),_:1},8,["modelValue"])])]),o("div",ve,[e[29]||(e[29]=o("h3",null,"Cupping protocol",-1)),l(d,null,{default:n(()=>[l(H,{modelValue:t.protocol,"onUpdate:modelValue":e[9]||(e[9]=s=>t.protocol=s),placeholder:"Select protocol"},{default:n(()=>[l(g,{label:"Arabica",value:"arabica"}),l(g,{label:"Robusta",value:"robusta"}),l(g,{label:"SCA",value:"sca"}),l(g,{label:"Custom",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),e[30]||(e[30]=o("div",{class:"protocol-note"},[o("p",null,"* SCA Coffee Value Assessment Beta Version 2023 Form")],-1))]),o("div",ge,[e[32]||(e[32]=o("h3",null,"Number of samples",-1)),o("div",Ve,[l(O,{modelValue:t.sampleCount,"onUpdate:modelValue":e[10]||(e[10]=s=>t.sampleCount=s),min:1,max:100},null,8,["modelValue"]),l(y,{modelValue:t.isBlind,"onUpdate:modelValue":e[11]||(e[11]=s=>t.isBlind=s)},{default:n(()=>e[31]||(e[31]=[a("Blind")])),_:1,__:[31]},8,["modelValue"])])]),o("div",be,[e[34]||(e[34]=o("h3",null,"Combo Cupping",-1)),l(y,{modelValue:t.comboCupping,"onUpdate:modelValue":e[12]||(e[12]=s=>t.comboCupping=s)},{default:n(()=>e[33]||(e[33]=[a("Enable combo cupping")])),_:1,__:[33]},8,["modelValue"])]),o("div",Ce,[e[36]||(e[36]=o("h3",null,"Custom number of cups",-1)),l(y,{modelValue:t.customCupCount,"onUpdate:modelValue":e[13]||(e[13]=s=>t.customCupCount=s)},{default:n(()=>e[35]||(e[35]=[a("Enable custom number of cups")])),_:1,__:[35]},8,["modelValue"])]),o("div",Se,[l(p,{type:"primary","native-type":"submit",loading:C.value},{default:n(()=>e[37]||(e[37]=[a("Save")])),_:1,__:[37]},8,["loading"]),l(p,{onClick:M},{default:n(()=>e[38]||(e[38]=[a("Discard")])),_:1,__:[38]})])]),_:1})])])}}},Ne=Y(we,[["__scopeId","data-v-62aa7735"]]);export{Ne as default};
